(function(h,u){var d=function(){function v(g){this.name=g;this.supportedLanguages=[];this.aboutDialog="";this.settings={};this.version=0;var e=a.$;this.onRender=function(a){};this.onRun=function(a){};this.register=function(){d.registerPlugin(this.name,this)};this.run=function(){this.onRun(e)};this.render=function(){this.onRender(e)}}function n(){k("waitForLib invoked");d.internal.__loadAttempts==d.internal.__maxLoadAttempts?(k("Max load count reached: stopping execution."),w()):"undefined"==typeof h.jQuery||
null==h.jQuery?(k("waitForLib: jQuery undefined."),setTimeout(function(){n()},100),d.internal.__loadAttempts++):(a.$=h.jQuery.noConflict(!0),"undefined"!=typeof h._jQuery&&(h.jQuery=h._jQuery),"undefined"!=typeof h._$&&(h.$=h._$),a.$(document).ready(function(){q()}))}function q(){k("broadcastLoaded fired.");h.AtKit=a;"undefined"!=typeof h.AtKitLoaded&&h.AtKitLoaded.fire(null,{version:d.internal.__version})}function x(){k("siteFixes fired. Running fixes.");if(0!=a.__env.siteFixes.length)for(fix in a.__env.siteFixes){var g=
a.__env.siteFixes[fix];g.regex.test()&&g.f()}}function r(g){k("renderButton fired for ident "+g+".");var e=a.__templates.button,e=e.replace(/\(ID\)/ig,g),e=e.replace(/\(TITLE\)/ig,a.__env.buttons[g].tooltip),e=e.replace(/\(SRC\)/ig,a.__env.buttons[g].icon),e=a.$(e);e.children("a").bind("click",{button:a.__env.buttons[g]},function(e){try{a.__env.buttons[g].action(e.data.button.dialogs,e.data.button.functions)}catch(h){d.internal.__debug&&k(h)}e.preventDefault()});e.children("a").bind("focus",function(){a.$(this).attr("style",
a.$(this).attr("style")+a.__CSS[".at-btn a:active"])});e.children("a").bind("focusout",function(){a.$(this).attr("style",a.__CSS[".at-btn a"])});a.__env.buttons[g].HTML=e;return a.__env.buttons[g].HTML}function y(){"undefined"==typeof a.$.facebox&&a.addScript(d.internal.__faceboxURL);if(!d.internal.__invoked){0==a.$("#sbarGhost").length&&m();a.$(a.$("<div>",{id:"sbar"})).insertAfter("#sbarGhost");var g=a.settings.isRightToLeft?"right":"left";a.$(a.$("<a>",{id:"sbarlogo",click:function(){z()}}).append(a.$("<img>",
{src:a.settings.logoURL,align:g,border:"0",title:a.settings.name+"Logo",alt:a.settings.name+"Logo",style:"margin-top:10px;float:"+g}))).appendTo("#sbar");a.$("<img>",{src:"https://misc.services.atbar.org/stats/stat.php?channel="+d.internal.__channel+"-"+a.settings.name+"&version="+d.internal.__version.toFixed(1)+"."+d.internal.__build,alt:" "}).appendTo("#sbar");a.settings.allowclose&&a.addButton("atkit-unload",a.localisation("exit"),d.internal.__assetURL+"img/close.png",function(){a.close()},null,
null,{cssClass:"fright"});a.settings.allowreset&&a.addButton("atkit-reset",a.localisation("reset"),d.internal.__assetURL+"img/reset.png",function(){a.reset()},null,null,{cssClass:"fright"});a.settings.allowhelp&&a.addButton("atkit-help",a.localisation("help"),d.internal.__assetURL+"img/help.png",function(){a.help()},null,null,{cssClass:"fright"});for(b in a.__env.buttons)a.$(r(b)).appendTo("#sbar");l();x();"msie"==a.$.browser&&6==a.$.browser.version?a.$("#sbarGhost").remove():a.$("#sbarGhost").html("&nbsp;");
d.internal.__invoked=!0;a.__env.global.unloadFn["default"]=function(){a.$("#sbarGhost, #sbar").remove()};a.__env.global.resetFn["default"]=function(){location.reload(!0)};a.$("body").trigger("AtKitRenderComplete")}}function l(g){g="undefined"==typeof g?a.__CSS:g;for(c in g)if(!/:active/.test(c)&&0!=a.$(c).length)try{var d=g[c];if(a.settings.isRightToLeft)if(-1!=d.indexOf("float:left"))var h=RegExp("float:left","gi"),d=d.replace(h,"float:right");else-1!=d.indexOf("float:right")&&(h=RegExp("float:right",
"gi"),d=d.replace(h,"float:left"));a.$(c).attr("style",d)}catch(l){k(l.description)}}function z(){d.internal.__aboutDialog.HTML="<h2>About "+a.settings.name+"</h2>";d.internal.__aboutDialog.HTML+="<p id='ATKFBUserSpecifiedAbout'>"+a.settings.about+"</p>";d.internal.__aboutDialog.HTML+="<p id='ATKFBAboutFooter'>Powered by AtKit "+d.internal.versionString;var g=a.listPlugins();0<g.length&&(d.internal.__aboutDialog.HTML+="<br /> Registered plugins: ",g.map(function(a,g,h){d.internal.__aboutDialog.HTML+=
"<button class='pluginLink'>"+a+"</button>"}));d.internal.__aboutDialog.HTML+="</p>";d.internal.__aboutDialog.HTML=a.$("<div>",{id:"ATKFBAbout"}).append(d.internal.__aboutDialog.HTML);a.message(d.internal.__aboutDialog.HTML);l(d.internal.__aboutDialog.CSS)}function k(a){d.internal.__debug&&(null!=d.internal.debugCallback?d.internal.debugCallback(a):"undefined"!=typeof console&&console.log(a))}function m(){barGhost=document.createElement("div");barGhost.id="sbarGhost";barGhost.innerHTML=a.__templates.barGhost;
if(null!=document.body)document.body.insertBefore(barGhost,document.body.firstChild);else var g=setInterval(function(){null!=document.body&&(document.body.insertBefore(barGhost,document.body.firstChild),clearInterval(g))},100)}function t(a,d){var h=document.createElement("script");h.src=d;h.type="text/javascript";h.id=a;document.getElementsByTagName("head")[0].appendChild(h)}function w(){bar=document.getElementById("sbarGhost");bar.innerHTML=a.__templates.barFailed;setTimeout(function(){body=document.getElementsByTagName("body");
bar=document.getElementById("sbarGhost");body[0].removeChild(bar)},d.internal.__errorMessageTimeout)}d.internal=d.prototype={__version:1.4,__build:1,__APIVersion:1,__baseURL:"https://core.atbar.org/",__APIURL:"http://a.atbar.org/",__pluginURL:"https://plugins.atbar.org/",__faceboxURL:"https://core.atbar.org/resources/js/facebox.dev.js",__libURL:"https://core.atbar.org/resources/jquery/1.8/jquery.min.js",__channel:"atkit",__invoked:!1,__debug:!1,__loadAttempts:0,__maxLoadAttempts:30,__errorMessageTimeout:2E3,
__localStorageNamespace:"AtKit_",__protocol:null,plugins:{},localisations:{en:{exit:"Exit",reset:"Reset webpage",help:"Help & instructions"},ar:{exit:"&#1582;&#1585;&#1608;&#1580;",reset:"&#1575;&#1604;&#1605;&#1581;&#1575;&#1608;&#1604;&#1577; &#1605;&#1580;&#1583;&#1583;&#1575;",help:"&#1605;&#1587;&#1575;&#1593;&#1583;&#1577; &#1608; &#1605;&#1593;&#1604;&#1608;&#1605;&#1575;&#1578; &#1575;&#1590;&#1575;&#1601;&#1610;&#1577;"}},templates:{global:{buttons:{},dialogs:{},storage:{},fn:{},unloadFn:{},
helpFn:{},resetFn:{},closeFn:{}}},debugCallback:null,language:"en",defaultLanguage:"en"};d.internal.__resourceURL=d.internal.__baseURL;d.internal.__channelURL+=d.internal.__channel;d.internal.__assetURL=d.internal.__baseURL+"resources/";d.internal.versionString="v"+d.internal.__version.toFixed(1)+"."+d.internal.__build+" ("+d.internal.__channel+" release channel)";d.internal.__aboutDialog={CSS:{"#ATKFBAbout":"font-family:Helvetica, Verdana, Arial, sans-serif; font-size:12px; color:#364365; direction: ltr; text-align:left",
"#ATKFBAbout h2":"border-bottom:1px solid #DDD; font-size:16px; margin-bottom:5px; margin-top:10px; padding-bottom:5px; direction: ltr; text-align:left","#ATKFBAbout p#ATKFBAboutFooter":"border-top:1px solid #DDD;p adding-top:10px; margin-top:25px;"}};d.external=d.prototype={transport:"JSONP",window:h,global:d.internal.templates.global,buttons:{},languageMap:{},siteFixes:[]};var a={__env:d.external,__templates:{barGhost:'<center><img src="'+d.internal.__assetURL+'img/loading.gif" style="margin-top:10px;" /></center>',
barFailed:"<center>library loading failed</center>",button:'<div id="at-btn-(ID)" title="(TITLE)" class="at-btn"><a title="(TITLE)" id="at-lnk-(ID)" href="#ATBarLink"><img src="(SRC)" alt="(TITLE)" height="16" width="16" border="0" /></a></div>',spacer:'<div class="at-spacer"></div>',separator:'<div class="at-separator at-separator-(ID)"></div>'},__CSS:{"#sbar":"height:40px; left:0; line-height:40px; margin-left:auto; margin-right:auto; margin-top:0; position:fixed; top:0;width:100%; z-index:2147483646; padding:0 5px; background:url("+
d.internal.__assetURL+"img/background.png) repeat-x #EBEAED;","#sbarGhost":"height:40px; width:100%;",".at-spacer":"display:block; height:40px; width:40px; float:left",".at-separator":"display:block; height:25px; float:left; border-left:2px solid #a9a9a9; margin:7px 1px 4px 7px",".at-btn":"height:28px; width:28px; float:left; line-height:14px; text-align:center; color:#FFF; clear:none; margin:5px 0 0 5px;background:url("+d.internal.__assetURL+"img/button_background.png) no-repeat",".at-btn a":"display:block; height:28px; width:28px; background:transparent; position:inherit;",
".at-btn a:active":"border:yellow solid 2px;",".at-btn img":"margin:0; padding:6px; border:none; background:none;","#at-btn-atkit-reset, #at-btn-atkit-unload, #at-btn-atkit-help":"height:28px; width:28px; line-height:14px; text-align:center; color:#FFF; clear:none; float:right; margin:5px 10px 0 0; background:url("+d.internal.__assetURL+"img/button_background.png) no-repeat;","#at-facebox > .at-popup > table .at-fb-tb-body > .at-fb-footer":"border-top-width: 1px; border-top-style: solid; border-top-color: rgb(221, 221, 221); padding-top: 5px; margin-top: 10px; display: block; text-align: left;",
"#at-facebox > .at-popup > table .at-fb-tb-body > .at-fb-footer > a ":"float: left;","#at-facebox > .at-popup > table .at-fb-tb-body > .at-fb-footer > a > img ":"float: left;","#at-facebox > .at-popup > table .at-fb-tb-body > .at-fb-content > .user-dialog > h1":"font-family:Helvetica Neue,Helvetica,Arial,sans-serif; font-size:18pt; font-weight:bold; color:black; float:left; display:block;","#at-facebox > .at-popup > table .at-fb-tb-body > .at-fb-content h1":"font-family:Helvetica Neue,Helvetica,Arial,sans-serif; font-size:18pt; font-weight:bold; color:black; float:left; display:block;",
"#at-facebox > .at-popup > table .at-fb-tb-body > .at-fb-content h2":"font-family:Helvetica Neue,Helvetica,Arial,sans-serif; font-size:16pt; font-weight:bold; color:black; float:left; display:block;","#at-facebox > .at-popup > table .at-fb-tb-body > .at-fb-content p":"float:left; display:block;","#at-facebox > .at-popup > table .at-fb-tb-body > .at-fb-content > .user-dialog > p":"float:left; display:block;","#at-facebox > .at-popup > table .at-fb-tb-body > .at-fb-content button":"font-family:Helvetica Neue,Helvetica,Arial,sans-serif; height:26px; margin:10px; padding:5px; color:white; background-color:#0064CD; border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25); text-shadow:0 -1px 0 rgba(0,0,0,0.25); background-image: -webkit-linear-gradient(top, #049cdb, #0064cd); border-radius:4px",
"#at-facebox > .at-popup > table .at-fb-tb-body > .at-fb-content label":"float:left; display:block;","#at-facebox > .at-popup > table .at-fb-tb-body > .at-fb-content select":"float:left; display:block;","#at-facebox > .at-popup > table .at-fb-tb-body > .at-fb-content input":"float:left; display:block;"},settings:{noiframe:!0,allowclose:!0,allowreset:!0,allowhelp:!0,isRightToLeft:!1,logoURL:"",name:"",about:""},htmlTags:"a abbr acronym address applet area article aside audio b base basefont bdi bdo big blockquote body br button canvas caption center cite code col colgroup command datalist dd del details dfn dir div dl dt em embed fieldset figcaption figure font footer form frame frameset h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link map mark menu meta meter nav noframes noscript object ol optgroup option output p param pre progress q rp rt ruby s samp script section select small source span strike strong style sub summary sup table tbody td textarea tfoot th thead time title tr track tt u ul var video wbr".split(" "),
version:d.internal.__APIVersion,$:"",plugin:function(a){return new v(a)},getVersion:function(){return d.internal.__version.toFixed(1)+"."+d.internal.__build},isRendered:function(){return d.internal.__invoked},g:function(){return d.internal.__resourceURL},getResourceURL:function(){return d.internal.__resourceURL},getChannelURL:function(){return d.internal.__channelURL},getPluginURL:function(){return d.internal.__pluginURL},setName:function(g){a.settings.name=g},setAbout:function(g){a.settings.about=
g},setLogo:function(g){a.settings.logoURL=g},setIsRightToLeft:function(g){a.settings.isRightToLeft=g},setCSS:function(g,d){a.__CSS[g]=d},getHtmlTags:function(){return a.htmlTags},setIsRightToLeft:function(g){a.settings.isRightToLeft=g},setLanguage:function(a){d.internal.language=a},getLanguage:function(){return d.internal.language},addLocalisation:function(a,e,h){d.internal.localisations[a][e]=h},addLocalisationMap:function(g,e){d.internal.localisations[g]=a.$.extend(!0,d.internal.localisations[g],
e)},localisation:function(a){return"undefined"==typeof d.internal.localisations[d.internal.language]?d.internal.localisations[d.internal.defaultLanguage][a]:"undefined"==typeof d.internal.localisations[d.internal.language][a]?"{no value set for key "+a+" in language "+d.internal.language+"}":d.internal.localisations[d.internal.language][a]},addFix:function(d,e){a.__env.siteFixes.push({regex:d,f:e})},addScript:function(d,e){"undefined"!=typeof a.$?0<a.$('script[src="'+d+'"]').length||a.$.getScript(d,
e):t("",d)},addStylesheet:function(d,e){a.$("head").append(a.$("<link>",{rel:"stylesheet",href:d,type:"text/css",id:e}))},addFn:function(d,e){a.__env.global.fn[d]=e},addCloseFn:function(d,e){a.__env.global.closeFn[d]=e},addResetFn:function(d,e){a.__env.global.resetFn[d]=e},addHelpFn:function(d,e){a.__env.global.helpFn[d]=e},addDialog:function(d,e,h){a.__env.global.dialogs[d]={title:e,body:h}},addButton:function(g,e,h,k,n,q,m){"undefined"==typeof a.__env.buttons[g]&&(a.__env.buttons[g]={icon:h,tooltip:e,
action:k,dialogs:n,functions:q},null!=m&&(a.__env.buttons[g]=a.$.extend(!0,a.__env.buttons[g],m)),d.internal.__invoked&&(a.$(r(g)).appendTo("#sbar"),l()))},removeButton:function(g){delete a.__env.buttons[g];d.internal.__invoked&&(k("remove button "+g),a.$("#at-btn-"+g).remove())},addSpacer:function(d){"undefined"==typeof d&&a.$(a.__templates.spacer).appendTo("#sbar");if(!isNaN(d))for(i=0;i<d;i++)a.$(a.__templates.spacer).appendTo("#sbar");l()},addSeparator:function(d){"undefined"==typeof d&&(d="separator"+
Math.floor(999*Math.random()+1));var e=a.__templates.separator,e=e.replace(/\(ID\)/ig,d),e=a.$(e);e.appendTo("#sbar");l()},removeSeparator:function(g){d.internal.__invoked&&(k("remove separator "+g),a.$(".at-separator-"+g).each(function(){this.remove()}))},importPlugins:function(g,e){var h=g instanceof Array?g.join(","):g;a.addScript(d.internal.__pluginURL+h+".js",e)},addPlugin:function(a){d.internal.plugins[a].payload()},registerPlugin:function(a,e,h){d.internal.plugins[a]={payload:e,metadata:h}},
listPlugins:function(){var a=[];for(p in d.internal.plugins)a.push(p);return a},getPluginMetadata:function(a){return d.internal.plugins[a].metadata},show:function(d,e){d=a.$("<div>",{"class":"userDialog"}).append(a.$("<h2>",{html:d.title}),a.$("<p>",{html:d.body}));a.$("body").find(".facebox_hide").remove();a.$.facebox(d);l();"null"!=typeof e&&"undefined"!=typeof e&&e()},message:function(d,e){a.$("body").find(".facebox_hide").remove();a.$.facebox(d);l();"null"!=typeof e&&"undefined"!=typeof e&&e()},
hideDialog:function(){a.$(h.document).trigger("close.facebox")},call:function(d,e){return a.__env.global.fn[d](e)},set:function(d,e){a.__env.global.storage[d]=e},get:function(d){return a.__env.global.storage[d]},storageAvailable:function(){return typeof h.localStorage?!0:!1},storage:function(g,e){if(!a.storageAvailable())return!1;var k=d.internal.__localStorageNamespace+a.settings.name+"_"+g;if("undefined"==typeof e)return h.localStorage.getItem(k);h.localStorage.setItem(k,e);return!0},clearStorage:function(){if(a.storageAvailable()){var g=
RegExp("^"+(d.internal.__localStorageNamespace+a.settings.name)+".*");for(s in h.localStorage)s.match(g)&&h.localStorage.removeItem(s)}},setDebugger:function(a){d.internal.debugCallback=a},lib:function(){return"function"==typeof a.$?a.$:"string"==typeof a.$&&"function"==typeof h.jQuery?h.jQuery:!1},render:function(){y()},close:function(){for(f in a.__env.global.unloadFn)a.__env.global.unloadFn[f]();d.internal.language=d.internal.defaultLanguage;d.internal.debugCallback=null;a.__env.global=d.internal.templates.global;
a.__env.buttons={};a.__env.languageMap={};a.__env.siteFixes=[];d.internal.plugins={};d.internal.__invoked=!1},reset:function(){for(f in a.__env.global.resetFn)a.__env.global.resetFn[f]();d.internal.__invoked=!1},help:function(){h.open("http://"+d.internal.language+".wiki.atbar.org/","_blank")}};k("bootstrapping AtKit "+d.internal.versionString+"...");if(!(null!=document.getElementById("sbar")||d.internal.__invoked||a.settings.noiframe&&h!=h.top))b:{"undefined"!=typeof h.AtKitLoaded&&m(),"undefined"==
typeof unsafeWindow?d.external.window=h:(d.external.window=unsafeWindow,d.external.transport="GM-XHR"),k("loadLibrary called");if("undefined"!=typeof h.jQuery)try{jQversion=parseFloat(h.jQuery().jquery.match(/\d\.\d/));k("jQuery already loaded, v"+jQversion);if(1.5<jQversion){k("loaded version acceptable, using.");a.$=h.jQuery;q();break b}h._jQuery=h.jQuery;h.jQuery=null}catch(u){}else"undefined"!=typeof h.$&&(h._$=h.$);d.internal.__debug&&(newVersion=parseFloat(d.internal.__libURL.match(/\d\.\d/)),
k("jQuery not loaded, loading "+newVersion));t("atkit-jquery",d.internal.__libURL);n()}return a};h.AtKit=new d})(window);